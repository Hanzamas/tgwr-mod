add_namespace = ww1_italy_libya

# Libyan Tribes 
country_event = {
	id = ww1_italy_libya.1
	title = ww1_italy_libya.1.t
	desc = ww1_italy_libya.1.d
	picture = GFX_french_parliament
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_italy_libya.1.a
		unlock_decision_category_tooltip = ITA_libyan_tribes
		set_country_flag = libya_resistance
		NAF = {
			transfer_state = 661
			transfer_state = 273
			add_country_leader_role = {
				character = NAF_ramadan_asswehly
				promote_leader = yes
				country_leader = {
					ideology = civilian_dictatorship
					expire = "1965.1.1.1"
					traits = {
					}
				}
			}
			division_template = {
    			name = "Nafusi Tribesmen"
    			is_locked = yes
    			division_cap = 6
				priority = 0
    			template_counter = 0
    			regiments = {
        			irregular_infantry = { x = 0 y = 0 }
        			irregular_infantry = { x = 0 y = 1 }
    			}
			}
			random_owned_controlled_state = {
				create_unit = {
    				division = "name = \"Nafusi Tribesmen\" division_template = \"Nafusi Tribesmen\" start_manpower_factor = 1 start_equipment_factor = 1"
   					owner = NAF
    				count = 6
    				allow_spawning_on_enemy_provs = no
				}
			}
		}
	}
}

# Victory in Border War - Italy
country_event = {
	id = ww1_italy_libya.2
	title = ww1_italy_libya.2.t
	desc = ww1_italy_libya.2.d
	picture = GFX_french_parliament
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_italy_libya.2.a
		set_country_flag = victory_against_nafusi
		if = {
			limit = {
				has_country_flag = colonial_governments_in_libya
			}
			TRP = {
				transfer_state = 1060
				annex_country = {
    				target = NAF
    				transfer_troops = no
				}
			}
		}
		if = {
			limit = {
				has_country_flag = one_government_in_libya
			}
			CYR = {
				transfer_state = 1060
				annex_country = {
    				target = NAF
    				transfer_troops = no
				}
			}
		}
		if = {
			limit = {
				has_country_flag = annexation_of_libya
			}
			annex_country = {
    			target = NAF
    			transfer_troops = no
			}
		}
		every_state = {
			limit = {
				OR = {
					is_owned_and_controlled_by = TRP
					is_owned_and_controlled_by = CYR
				}
				OR = {
					NOT = {
						state = 448
						state = 450
					}
				}
			}
			add_dynamic_modifier = {
				modifier = ITA_libyan_resistance
			}
		}
		every_state = {
			limit = {
				OR = {
					is_owned_and_controlled_by = TRP
					is_owned_and_controlled_by = CYR
				}
				OR = {
					state = 448
					state = 450
				}
			}
			add_compliance = 20
		}
	}
}

# Loss in Border war - Italy
# Loss Against Tribesmen with Sticks
country_event = {
	id = ww1_italy_libya.3
	title = ww1_italy_libya.3.t
	desc = ww1_italy_libya.3.d
	picture = GFX_french_parliament
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_italy_libya.3.a
		add_political_power = -20
	}
}

# Victory in Border War - Nafusi
# We have ridiculised them
country_event = {
	id = ww1_italy_libya.4
	title = ww1_italy_libya.4.t
	desc = ww1_italy_libya.4.d
	picture = GFX_french_parliament
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_italy_libya.4.a
		
	}
}

# Loss in Border War - Nafusi
# womp womp
country_event = {
	id = ww1_italy_libya.5
	title = ww1_italy_libya.5.t
	desc = ww1_italy_libya.5.t
	picture = GFX_french_parliament
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_italy_libya.5.a
		
	}
}

# Stalemate in Border War - Italy/Nafusi
# Consider loss for both!
country_event = {
	id = ww1_italy_libya.6
	title = ww1_italy_libya.6.t
	desc = ww1_italy_libya.6.d
	picture = GFX_french_parliament
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_italy_libya.6.a
		trigger = {
			tag = ITA
		}
	}
	option = {
		name = ww1_italy_libya.6.b
		trigger = {
			tag = NAF
		}
	}
}
# Start Border War
country_event = {
	id = ww1_italy_libya.7
	title = ww1_italy_libya.7.t
	desc = ww1_italy_libya.7.d
	picture = GFX_french_parliament
	fire_only_once = yes
	is_triggered_only = yes
	immediate = {
		start_border_war = {
    		change_state_after_war = no
    		attacker = {
    		    state = 1060
    		    num_provinces = 5
    		    on_win = ww1_italy_libya.2
    		    on_lose = ww1_italy_libya.3
    		    on_cancel = ww1_italy_libya.6
				modifier = 0.1
        		dig_in_factor = 0
        		terrain_factor = 0.2
    		}	
    		defender = {
    		    state = 661
    		    num_provinces = 5
     		  	on_win = ww1_italy_libya.4
    		    on_lose = ww1_italy_libya.5
    		    on_cancel = ww1_italy_libya.6
				modifier = -0.15
        		dig_in_factor = -0.25
        		terrain_factor = 0
    		}
		}
	}
	option = {
		name = ww1_italy_libya.7.a
		effect_tooltip = {
			start_border_war = {
    		change_state_after_war = no
    		attacker = {
    		    state = 1060
    		    num_provinces = 5
    		    on_win = ww1_italy_libya.2
    		    on_lose = ww1_italy_libya.3
    		    on_cancel = ww1_italy_libya.6
				modifier = 0.1
        		dig_in_factor = 0
        		terrain_factor = 0.2
    		}	
    		defender = {
    		    state = 661
    		    num_provinces = 5
     		  	on_win = ww1_italy_libya.4
    		    on_lose = ww1_italy_libya.5
    		    on_cancel = ww1_italy_libya.6
				modifier = -0.15
        		dig_in_factor = -0.25
        		terrain_factor = 0
    		}
		}
		}
	}
}

# Loosing Our Grip
country_event = {
	id = ww1_italy_libya.8
	title = ww1_italy_libya.8.t
	desc = ww1_italy_libya.8.d
	picture = GFX_french_parliament
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_italy_libya.8.a
		every_state = {
			limit = {
				is_owned_by = ITA
				OR = {
					state = 448
					state = 1060
					state = 661
					state = 273
					state = 567
				}
			}
			transfer_state_to = TRP
		}
		every_state = {
			limit = {
				is_owned_by = ITA
				OR = {
					state = 450
					state = 1061
				}
			}
			transfer_state_to = CYR
		}
		hidden_effect = {
			ITA = {
				set_autonomy = {
					target = CYR
					autonomous_state = autonomy_colony
					end_wars = yes
					end_civil_wars = yes
				}
				set_autonomy = {
					target = TRP
					autonomous_state = autonomy_colony
					end_wars = yes
					end_civil_wars = yes
				}
			}
			CYR = {
				every_owned_state = {
					remove_core_of = CYR
					add_claim_by = CYR
				}
				set_capital = {
					state = 450
				}
				set_political_party = {
					ideology = neutrality
					popularity = 90
				}
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
					long_name = CYR_italian_colonial_government_long
					name = CYR_italian_colonial_government
				}
				set_country_flag = empty_focus
				add_country_leader_role = {
					character = CYR_vittorio_emanuele_iii
					promote_leader = yes
					country_leader = {
						ideology = colonial_government
						expire = "1965.1.1.1"
					}
				}
			}
			TRP = {
				set_cosmetic_tag = TRP_ITA
				every_owned_state = {
					remove_core_of = TRP
					add_claim_by = TRP
				}
				set_political_party = {
					ideology = neutrality
					popularity = 90
				}
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
					long_name = TRP_italian_colonial_government_long
					name = TRP_italian_colonial_government
				}
				set_country_flag = empty_focus
				add_country_leader_role = {
					character = TRP_vittorio_emanuele_iii
					promote_leader = yes
					country_leader = {
						ideology = colonial_government
						expire = "1965.1.1.1"
					}
				}
			}
		}
	}
}