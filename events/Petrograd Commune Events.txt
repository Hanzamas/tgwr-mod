add_namespace = petrograd_commune

#REBELLION OF THE PETROGRAD COMMUNE
country_event = {
	id = petrograd_commune.1
	title = petrograd_commune.1.t
	desc = petrograd_commune.1.d
	picture = ww1_russia_stolypin_2
	fire_only_once = yes
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			country_event = {
				id = petrograd_commune.2
				days = 1
			}
			if = {
				limit = {
					FIN = {
						is_subject_of = ROOT
					}
				}
				country_event = {
					id = petrograd_commune.4
					days = 14
				}
			}
			activate_mission = RUS_revolution_spreads
			if = {
				limit = {
					has_agrarian_question = yes
				}
				add_ideas = RUS_black_partition
			}
			if = {
				limit = { 
					has_labour_question = yes
				}
				add_ideas = RUS_general_strike
			}
			add_ideas = RUS_mass_mutinies
		}
	}
	option = {
		name = petrograd_commune.1.a
		trigger = {
			PET = {
				is_ai = yes
			}
		}
		effect_tooltip = {
			if = {
				limit = {
					has_agrarian_question = yes
				}
				add_ideas = RUS_black_partition
			}
			if = {
				limit = { 
					has_labour_question = yes
				}
				add_ideas = RUS_general_strike
			}
			add_ideas = RUS_mass_mutinies
		}
		PET = {
			change_tag_from = ROOT
		}
	}
	option = {
		name = petrograd_commune.1.b
		effect_tooltip = {
			activate_mission = RUS_revolution_spreads
			if = {
				limit = {
					has_agrarian_question = yes
				}
				add_ideas = RUS_black_partition
			}
			if = {
				limit = { 
					has_labour_question = yes
				}
				add_ideas = RUS_general_strike
			}
			add_ideas = RUS_mass_mutinies
		}
	}
}

#CHOOSING THE NEW CAPITAL
country_event = {
	id = petrograd_commune.2
	title = petrograd_commune.2.t
	desc = petrograd_commune.2.d
	picture = ww1_russia_stolypin_2
	fire_only_once = yes
	is_triggered_only = yes
	#Moscow, the First Capital
	option = {
		name = petrograd_commune.2.a
		trigger = {
			219 = {
				is_owned_and_controlled_by = ROOT
			}
		}
		set_capital = { state = 219 }
	}
	#Kiev, the Mother of Russian Cities
	option = {
		name = petrograd_commune.2.b
		trigger = {
			202 = {
				is_owned_and_controlled_by = ROOT
			}
		}
		set_capital = { state = 202 }
	}
	#Tsaritsyn, the safest of all three
	option = {
		name = petrograd_commune.2.c
		trigger = {
			217 = {
				is_owned_and_controlled_by = ROOT
			}
		}
		set_capital = { state = 217 }
	}
}

#MOSCOW REBELLION
country_event = {
	id = petrograd_commune.3
	title = petrograd_commune.3.t
	desc = petrograd_commune.3.d
	picture = ww1_russia_stolypin_2
	fire_only_once = yes
	is_triggered_only = yes
	#Expected
	option = {
		name = petrograd_commune.3.a
		trigger = {
			219 = {
				is_capital = no
			}
		}
		hidden_effect = {
			219 = {
				transfer_state_to = PET
				create_unit = {
					division = "name = \"Brigada Narodnogo Opolcheniya\" division_template = \"Brigada Narodnogo Opolcheniya\" start_manpower_factor = 0.8"
					owner = PET
					count = 7
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"Revolutionnaya Diviziya\" division_template = \"Pekhotnaya Diviziya\" start_manpower_factor = 0.8"
					owner = PET
					count = 3
					allow_spawning_on_enemy_provs = yes
				}
			}
		}
	}
	#Horrible!
	option = {
		name = petrograd_commune.2.b
		trigger = {
			219 = {
				is_capital = yes
			}
		}
		add_stability = -0.25
		hidden_effect = {
			219 = {
				transfer_state_to = PET
				create_unit = {
					division = "name = \"Brigada Narodnogo Opolcheniya\" division_template = \"Brigada Narodnogo Opolcheniya\" start_manpower_factor = 0.8"
					owner = PET
					count = 7
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"Revolutionnaya Diviziya\" division_template = \"Pekhotnaya Diviziya\" start_manpower_factor = 0.8"
					owner = PET
					count = 3
					allow_spawning_on_enemy_provs = yes
				}
			}
		}
	}
}

#FINLAND DECLARES INDEPENDENCE
country_event = {
	id = petrograd_commune.4
	title = petrograd_commune.4.t
	desc = petrograd_commune.4.d
	picture = ww1_russia_stolypin_2
	fire_only_once = yes
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			end_puppet = FIN
			create_FIN = yes
		}
	}
	#Expected
	option = {
		name = petrograd_commune.4.a
		effect_tooltip = {
			release = FIN
		}
	}
}