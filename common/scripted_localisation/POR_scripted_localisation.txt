# Gets the loc to be displayed based on what the current v (value) of the element in the array is (the value corresponds to the party id set in the scripted effect).
defined_text = {
	name = POR_GetParliamentPartyName
	text = {
		trigger = {
			check_variable = { v = 1 }
		}
		localization_key = POR_party_1_text
	}
	text = {
		trigger = {
			check_variable = { v = 2 }
		}
		localization_key = POR_party_2_text
	}
	text = {
		trigger = {
			check_variable = { v = 3 }
		}
		localization_key = POR_party_3_text
	}
	text = {
		trigger = {
			check_variable = { v = 4 }
		}
		localization_key = POR_party_4_text
	}
	text = {
		trigger = {
			check_variable = { v = 5 }
		}
		localization_key = POR_party_5_text
	}	
	text = {
		trigger = {
			check_variable = { v = 6 }
		}
		localization_key = POR_party_6_text
	}	
	text = {
		trigger = {
			check_variable = { v = 7 }
		}
		localization_key = POR_party_7_text
	}	
	text = {
		localization_key = "Error"
	}
}

# Party coalitions system
defined_text = {
	name = POR_GetParliamentPartyAlliance
	text = {
		trigger = {
			check_variable = { v = 1 }
			has_country_flag = regenerator_party_allied
		}
		localization_key = POR_parliament_allied
	}
	text = {
		trigger = {
			check_variable = { v = 2 }
			has_country_flag = progressive_party_allied
		}
		localization_key = POR_parliament_allied
	}
	text = {
		trigger = {
			check_variable = { v = 3 }
			has_country_flag = progressive_dissidents_allied
		}
		localization_key = POR_parliament_allied
	}
	text = {
		trigger = {
			check_variable = { v = 4 }
			has_country_flag = portuguese_republican_party_allied
		}
		localization_key = POR_parliament_allied
	}
	text = {
		trigger = {
			check_variable = { v = 5 } 
			has_country_flag = liberal_regenerator_party_allied
		}
		localization_key = POR_parliament_allied
	}
	text = {
		trigger = {
			check_variable = { v = 6 } 
			has_country_flag = nationalist_party_allied
		}
		localization_key = POR_parliament_allied
	}
	text = {
		trigger = {
			check_variable = { v = 7 } 
			has_country_flag = independents_allied
		}
		localization_key = POR_parliament_allied
	}	
	text = {
		localization_key = ""
	}
}


# Since index starts as 0, i can get the current seat number by jut adding it by one and then displaying it.
defined_text = {
	name = POR_GetParliamentSeatName
	text = {
		trigger = {
			set_temp_variable = { temp_seat = parliament_main_index }
			add_to_temp_variable = { temp_seat = 1 }
			check_variable = { temp_seat > 0 }
		}
		localization_key = POR_parliament_seat_text
	}
}

# Republican Coup Prediction
defined_text = {
	name = RepublicanCoupOutcome
	text = {
		trigger = {
			original_tag = POR
		}
		localization_key = POR_rep_coup_outcome
		# localization_key = ROM_dncdna
	}
	text = {
		trigger = {
			original_tag = POR
			check_variable = {
				kings_approval_of_government < -2
			}
			NOT = {
				has_completed_focus = ROM_the_house_always_wins
			}
			NOT = {
				has_completed_focus = ROM_deal_with_the_liberal_king
			}
			NOT = {
				has_completed_focus = ROM_new_constitution
			}
		}
		localization_key = ROM_king_view_complete_disapprove
	}
	text = {
		trigger = {
			NOT = {
				has_completed_focus = ROM_the_house_always_wins
			}
			NOT = {
				has_completed_focus = ROM_deal_with_the_liberal_king
			}
			NOT = {
				has_completed_focus = ROM_new_constitution
			}
			OR = {
				check_variable = {
					kings_approval_of_government = -2
				}
				check_variable = {
					kings_approval_of_government = -1
				}
			}
		}
		localization_key = ROM_king_view_disapprove
	}
	text = {
		trigger = {
			NOT = {
				has_completed_focus = ROM_the_house_always_wins
			}
			NOT = {
				has_completed_focus = ROM_deal_with_the_liberal_king
			}
			NOT = {
				has_completed_focus = ROM_new_constitution
			}
			OR = {
				check_variable = {
					kings_approval_of_government = 0
				}
				check_variable = {
					kings_approval_of_government = 1
				}
			}
		}
		localization_key = ROM_king_view_neutral
	}
	text = {
		trigger = {
			NOT = {
				has_completed_focus = ROM_the_house_always_wins
			}
			NOT = {
				has_completed_focus = ROM_deal_with_the_liberal_king
			}
			NOT = {
				has_completed_focus = ROM_new_constitution
			}
			NOT = {
				has_completed_focus = ROM_a_useful_ally
			}
			OR = {
				check_variable = {
					kings_approval_of_government = 2
				}
				check_variable = {
					kings_approval_of_government = 3
				}
			}
		}
		localization_key = ROM_king_view_approve
	}
	text = {
		trigger = {
			NOT = {
				has_completed_focus = ROM_the_house_always_wins
			}
			NOT = {
				has_completed_focus = ROM_a_useful_ally
			}
			NOT = {
				has_completed_focus = ROM_deal_with_the_liberal_king
			}
			NOT = {
				has_completed_focus = ROM_new_constitution
			}
			check_variable = {
				kings_approval_of_government > 3
			}
		}
		localization_key = ROM_king_view_very_aprove
	}
	text = {
		trigger = {
			NOT = {
				has_completed_focus = ROM_the_house_always_wins
			}
			has_completed_focus = ROM_a_useful_ally
			NOT = {
				has_completed_focus = ROM_deal_with_the_liberal_king
			}
			NOT = {
				has_completed_focus = ROM_new_constitution
			}
			OR = {
				check_variable = {
					kings_approval_of_government = 2
				}
				check_variable = {
					kings_approval_of_government = 3
				}
			}
		}
		localization_key = ROM_king_view_approve2
	}
	text = {
		trigger = {
			NOT = {
				has_completed_focus = ROM_the_house_always_wins
			}
			has_completed_focus = ROM_a_useful_ally
			NOT = {
				has_completed_focus = ROM_deal_with_the_liberal_king
			}
			NOT = {
				has_completed_focus = ROM_new_constitution
			}
			check_variable = {
				kings_approval_of_government > 3
			}
		}
		localization_key = ROM_king_view_very_aprove2
	}
}