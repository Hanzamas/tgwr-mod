###########################
# South Russian Army Events
###########################

add_namespace = ww1_sra

# Drozdovsky's March
######################
country_event = {
	title = ww1_sra.1.t
	desc = ww1_sra.1.d
	id = ww1_sra.1
	picture = GFX_report_event_generic_battle
	fire_only_once = yes
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	option = { # This will strengthen the volunteer army in the south
		name = ww1_sra.1.a
		army_experience = 10
	}
}
# Kuban annexation
######################
country_event = {
	title = ww1_sra.2.t
	desc = ww1_sra.2.d
	id = ww1_sra.2
	picture = GFX_report_event_generic_battle
	
	fire_only_once = yes
	is_triggered_only = yes
	
	option = {
		name = ww1_sra.2.a
		ai_chance = { 
			factor = 100 
			modifier = {
				factor = 1000
				has_war_with = SOV
			}
		}
		SRA = {
			country_event = {
				id = ww1_sra.3
				days = 7
			}
		}
		SRA = {
			change_tag_from = ROOT		
		}
	}
}
# Armed forces of South Russia form
######################
country_event = {
	title = ww1_sra.3.t
	desc = ww1_sra.3.d
	id = ww1_sra.3
	picture = GFX_report_event_generic_battle
	
	fire_only_once = yes
	is_triggered_only = yes
	
	option = {
		name = ww1_sra.3.a
		annex_country = {
			target = KUB
			transfer_troops = yes
		}
		annex_country = {
			target = DON
			transfer_troops = yes
		}
		RUS_pyotr_krasnov = {
			demote_leader = yes 
			set_nationality = SRA
		}
		KUB_viktor_pokrovsky = {
			set_nationality = SRA
		}
		DON_vladimir_sidorin = {
			set_nationality = SRA
		}
		set_cosmetic_tag = SRA_government_established
		hidden_effect = {
			every_state = {
				limit = { is_core_of = KUB }
				add_core_of = SRA
			}
			every_state = {
				limit = { is_core_of = KUB }
				add_core_of = SRA
			}
			every_state = {
				limit = { is_core_of = DON }
				remove_core_of = DON
			}
			every_state = {
				limit = { is_core_of = KUB }
				remove_core_of = KUB
			}
		}
	}
}
# Wrangel is exiled to Constantinople
######################
country_event = {
	title = ww1_sra.4.t
	desc = ww1_sra.4.d
	id = ww1_sra.4
	picture = GFX_report_event_generic_battle
	
	fire_only_once = yes
	is_triggered_only = yes
	
	option = {
		name = ww1_sra.4.a	
		RUS_pyotr_wrangel = {
			set_nationality = OTT
		}	
	}
}
# Moscow Directive
######################
country_event = {
	title = ww1_sra.5.t
	desc = ww1_sra.5.d
	id = ww1_sra.5
	picture = GFX_report_event_generic_battle
	
	fire_only_once = yes
	is_triggered_only = yes
	
	option = {
		name = ww1_sra.5.a
		ai_chance = { 
			factor = 100 
			modifier = {
				factor = 1000
				has_war_with = SOV
			}
		}	
	}
	option = {
		name = ww1_sra.5.b
		ai_chance = {
			factor = 0
		}
		transfer_state = 196
		transfer_state = 227
		transfer_state = 218
		activate_mission = SRA_moscow_directive_phase_1
		UKR = {
			country_event = {
				id = ww1_sra.6
			}
		}
	}
}
# Ukrainian answer
######################
country_event = {
	title = ww1_sra.6.t
	desc = ww1_sra.6.d
	id = ww1_sra.6
	picture = GFX_report_event_generic_battle
	
	fire_only_once = yes
	is_triggered_only = yes
	
	option = {
		name = ww1_sra.6.a
		
	}
}
# Denikin overthrown
country_event = {
	id = ww1_sra.7
	title = ww1_sra.7.t
	desc = ww1_sra.7.d
	picture = ww1_sra_7
	fire_only_once = yes
	is_triggered_only = no
	trigger = {
		tag = SRA
		has_capitulated = no
		has_war_with = SOV
		surrender_progress > 0.65 
		RUS_anton_denikin = {
			is_country_leader = yes
		}
	}
	mean_time_to_happen = {
		days = 3
	}
	option = {
		name = ww1_sra.7.a
		retire_character = RUS_anton_denikin
		RUS_pyotr_wrangel = {
			set_nationality = SRA
		}	
		add_country_leader_role = {
			Character = RUS_pyotr_wrangel 
			Promote_leader = yes
			Country_leader = {
				ideology = despotism
				
				traits = {
					
				}
			}
		}
		set_cosmetic_tag = SRA_government_wrangel_takeover
	}
}
#Death of Mikhail Alekseyev
country_event = {
	id = ww1_sra.8
	title = ww1_sra.8.t
	desc = ww1_sra.8.d
	picture = ww1_sra_8
	fire_only_once = yes
	is_triggered_only = no
	trigger = {
		tag = SRA
		date > 1918.10.8
	}
	mean_time_to_happen = {
		days = 10
	}
	option = {
		name = ww1_sra.8.a
		retire_character = RUS_mikhail_alekseyev
		add_country_leader_role = {
			Character = RUS_anton_denikin
			Country_leader = {
				ideology = despotism
				
				traits = {
					
				}
			}
		}
		RUS_anton_denikin = {
			Promote_leader = yes
		}
	}
}

#submod
# South Russian Army
###############################
country_event = {
	id = ww1_sra.9
	title = ww1_sra.9.t
	desc = ww1_sra.9.d
	picture = GFX_report_event_soldiers_in_france
	is_triggered_only = yes
	# trigger = {
	# 	tag = RUS
	# 	SRA = {
	# 		OR = {
	# 			is_subject_of = RUS
	# 			exists = no
	# 		}
	# 	}
	# 	date > 1918.08.31
	# 	RUS = {
	# 		NOT = {
	# 			OR = {
	# 				has_war_with = GER
	# 				has_war_with = AUH
	# 			}
	# 		}
	# 	}
	# }
	# mean_time_to_happen = {
	# 	days = 3
	# }
	immediate = {
		hidden_effect = {
			every_state = {
				limit = {
					OR = {
						state = 565 
						state =	232 
						state = 235 
						state = 579 
						state = 233 
						state = 234 
						state = 137 
						state = 238 
						state = 218 
						state = 245
					}
				}
				SRA = { add_state_core = PREV }
			}
			SRA = {
				transfer_state = 234
		    }
			every_state = {
				limit = {
					OR = {
						state = 565 
						state =	232 
						state = 235 
						state = 579 
						state = 233 
						state = 234 
					}
				}
				add_dynamic_modifier = { modifier = SRA_red_rebels}
			}
			random_owned_state = {
				limit = {
					OR = {
						state = 234
						state = 137
					}
				}
				prioritize = {
					234
				}
				SRA = { set_capital = { state = PREV } }
			}
			SRA = {
				set_global_flag = russian_revolution
				load_oob = "SRA_1918"
				declare_war_on = {
				target = SOV
				type = annex_everything
				}
				set_politics = {
					ruling_party = democratic
					
					set_popularities = {
						fascism = 27
						communism = 3
						democratic = 36
						neutrality = 34
					}
				}
				add_timed_idea = {
					idea = SRA_cornered_army
					days = 120
				}
			}
			RUS = {
				add_to_faction = SRA
			}
			RUS_anton_denikin = {
				set_nationality = SRA
			}
			RUS_mikhail_alekseyev = {
				set_nationality = SRA
			}
			RUS_pyotr_wrangel = {
				set_nationality = SRA
			}
			RUS_lavr_kornilov = {
				set_nationality = SRA
			}
			RUS_mikhail_drozdovsky = {
				set_nationality = SRA
			}
			RUS_aleksandr_kutepov = {
				set_nationality = SRA
			}
		}
	}
	option = {
		name = ww1_sra.9.a
	}
	option = {
		name = ww1_sra.9.b
		trigger = {
			is_ai = no
		}
		SRA = { change_tag_from = ROOT }
	}
}

#Death of Mikhail Drozdovsky
country_event = {
	id = ww1_sra.10
	title = ww1_sra.10.t
	desc = ww1_sra.10.d
	picture = GFX_report_event_generic_army
	fire_only_once = yes
	is_triggered_only = no
	trigger = {
		tag = SRA
		date > 1919.1.1
		has_war_with = SOV
	}
	mean_time_to_happen = {
		days = 10
	}
	option = {
		name = ww1_sra.10.a
		retire_character = RUS_mikhail_drozdovsky
	}
}

#Death of Lavr Kornilov
country_event = {
	id = ww1_sra.11
	title = ww1_sra.11.t
	desc = ww1_sra.11.d
	picture = ww1_sra_11
	fire_only_once = yes
	is_triggered_only = no
	trigger = {
		tag = SRA
		date > 1918.04.13
		has_war_with = SOV
	}
	mean_time_to_happen = {
		days = 10
	}
	option = {
		name = ww1_sra.11.a
		retire_character = RUS_lavr_kornilov
	}
}

#Esprit de Corps
country_event = {
	id = ww1_sra.12
	title = ww1_sra.12.t
	desc = ww1_sra.12.d
	picture = ww1_sra_12
	fire_only_once = yes
	is_triggered_only = no
	trigger = {
		tag = SRA
		date > 1919.06.1
		has_war_with = SOV
	}
	mean_time_to_happen = {
		days = 10
	}
	option = {
		name = ww1_sra.12.a
		add_timed_idea = {
			idea = SRA_esprit_de_corps
			days = 120
		}
	}
}


