RUS_zelimhan_rebellion = {

	RUS_zelimhan_rebellion_timer = {
		icon = generic_ignite_civil_war

		allowed = {
			original_tag = RUS
		}

		available = {
			has_country_flag = zelimhan_killed
			NOT = {
				OR = {
					565 = {
						resistance > 85
					}
					232 = {
						resistance > 85
					}
				}
			} 
		}

		days_mission_timeout = 1100
		fire_only_once = yes
		on_map_mode = map_and_decisions_view
		highlight_states = {
			highlight_state_targets = { state = 232 } 
			highlight_color_while_active = 1
		}
		is_good = no

		activation = {
			NOT = {
				has_country_flag = zelimhan_killed
			} 
		}

		cancel_trigger = {
			232 = {
				resistance > 85
			}
		}

		timeout_effect = {
			add_stability = -0.05
			add_political_power = -150
			hidden_effect = {			
				MOU = {
					transfer_state = 232
					add_ideas = RUS_mountain_rebellion
					declare_war_on = {
						target = RUS
						type = annex_everything
					}
					load_oob = "MOU_rebellion"
				}
				set_state_controller = 232
				set_country_flag = zelimhan_rebels
			}
			custom_effect_tooltip = RUS_zelimkhan_rebels
		}

		complete_effect = {
			add_stability = 0.05
			add_political_power = 100
			232 = {
				add_compliance = 10
			}	
			custom_effect_tooltip = RUS_zelimkhan_crushed
		}
	}
	RUS_hunt_down_zelimkhan = {

		icon = GFX_filler

		available = {
			has_completed_focus = RUS_fight_abreks_in_caucasus
			divisions_in_state = {
    				size > 1
    				state = 232
			}
			has_equipment = { infantry_equipment > 99 }
			NOT = {
				has_country_flag = ongoing_zelimhan
			}
		}

		visible = {
			NOT = {
				has_country_flag = zelimhan_rebels
			}
			always = yes
		}

		remove_trigger = {
			has_country_flag = zelimhan_killed
		}

		fire_only_once = yes

		days_remove = 30

		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 99 }
		}
		custom_cost_text = decision_cost_IE_100
		
		complete_effect = {
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -100
				}
				set_country_flag = ongoing_zelimhan
			}
		}
		remove_effect = {
			country_event = {
				id = ww1_russia.30
			}
			hidden_effect = {
				clr_country_flag = ongoing_zelimhan
			}
		}

		ai_will_do = {
			base = 10
		}
	}
	RUS_hunt_down_ring_leaders = {

		icon = GFX_filler

		available = {
			has_completed_focus = RUS_fight_abreks_in_caucasus
			divisions_in_state = {
    				size > 1
    				state = 232
			}
			has_equipment = { infantry_equipment > 99 }
			NOT = {
				has_country_flag = ongoing_zelimhan
			}
		}

		visible = {
			NOT = {
				has_country_flag = zelimhan_rebels
			}
			has_completed_focus = RUS_fight_abreks_in_caucasus
		}

		remove_trigger = {
			has_country_flag = zelimhan_killed
		}

		fire_only_once = yes

		days_remove = 60

		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 99 }
		}
		custom_cost_text = decision_cost_IE_100
		
		complete_effect = {
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -100
				}
				set_country_flag = ongoing_zelimhan
			}
		}
		remove_effect = {
			country_event = {
				id = ww1_russia.31
			}
			hidden_effect = {
				clr_country_flag = ongoing_zelimhan
			}
		}

		ai_will_do = {
			base = 10
		}
	}
	RUS_set_zelimhan_bounty = {

		icon = GFX_filler

		available = {
			has_country_flag = zelimhan_murders
			has_completed_focus = RUS_fight_abreks_in_caucasus
			divisions_in_state = {
    				size > 1
    				state = 232
			}
			NOT = {
				has_country_flag = ongoing_zelimhan
			}
		}

		visible = {
			NOT = {
				has_country_flag = zelimhan_rebels
			}
			has_country_flag = zelimhan_murders
		}

		remove_trigger = {
			has_country_flag = zelimhan_killed
		}

		fire_only_once = yes
		
		days_remove = 15

		cost = 100
		
		complete_effect = {
			hidden_effect = {
				set_country_flag = ongoing_zelimhan
			}
		}
		remove_effect = {
			add_country_flag = zelimhan_bounty_set
			add_days_mission_timeout = {
				mission = RUS_zelimhan_rebellion_timer
				days = 15
			}
			country_event = {
				id = ww1_russia.33
			}
			hidden_effect = {
				clr_country_flag = ongoing_zelimhan
			}
		}

		ai_will_do = {
			base = 10
		}
	}
	# event appears after zelimhan robs banks
	RUS_surround_zelimhan_village = {

		icon = GFX_filler

		available = {
			has_country_flag = zelimhan_robbed_bank
			divisions_in_state = {
    				size > 1
    				state = 232
			}
			has_equipment = { infantry_equipment > 99 }
			NOT = {
				has_country_flag = ongoing_zelimhan
			}
		}

		visible = {
			NOT = {
				has_country_flag = zelimhan_rebels
			}
			has_country_flag = zelimhan_robbed_bank
		}

		remove_trigger = {
			has_country_flag = zelimhan_killed
		}

		fire_only_once = yes

		days_remove = 10

		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 99 }
		}
		custom_cost_text = decision_cost_IE_100
		
		complete_effect = {
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -100
				}
				set_country_flag = ongoing_zelimhan
			}
		}
		remove_effect = {
			country_event = {
				id = ww1_russia.35
			}
			hidden_effect = {
				clr_country_flag = ongoing_zelimhan
			}
		}

		ai_will_do = {
			base = 10
		}
	}
	# zelimhan continues
	RUS_blow_up_quarters = {

		icon = GFX_filler

		available = {
			has_country_flag = zelimhan_left
			has_completed_focus = RUS_fight_abreks_in_caucasus
			divisions_in_state = {
    				size > 1
    				state = 232
			}
			has_equipment = { infantry_equipment > 99 }
			NOT = {
				has_country_flag = ongoing_zelimhan
			}
		}

		visible = {
			NOT = {
				has_country_flag = zelimhan_rebels
			}
			has_country_flag = zelimhan_left	
			has_completed_focus = RUS_fight_abreks_in_caucasus
		}

		remove_trigger = {
			has_country_flag = zelimhan_killed
		}

		days_re_enable = 30
		days_remove = 30
		
		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 99 }
		}
		custom_cost_text = decision_cost_IE_100
		
		complete_effect = {
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -100
				}
				set_country_flag = ongoing_zelimhan
			}
		}
		remove_effect  = {
			random_list = {
				50 = {
					232 = {
						add_compliance = 2
						add_resistance = -5
					}	
				}
				20 = {
					232 = {
						add_compliance = 4
						add_resistance = -10
					}	
				}
				5 = {
					232 = {
						add_compliance = 6
						add_resistance = -15
					}	
				}
				20 = {
					232 = {
						add_resistance = 10
						add_compliance = -5
					}	
				}
			}	
			hidden_effect = {
				clr_country_flag = ongoing_zelimhan
			}
		}
		ai_will_do = {
			base = 10
		}
	}
	# should appear after zelimhan did something again
	# generico decision
	RUS_arrest_ring_leaders = {

		icon = GFX_filler

		available = {
			has_completed_focus = RUS_fight_abreks_in_caucasus
			divisions_in_state = {
    				size > 1
    				state = 232
			}
			has_equipment = { infantry_equipment > 99 }
			NOT = {
				has_country_flag = ongoing_zelimhan
			}
		}

		visible = {
			NOT = {
				has_country_flag = zelimhan_rebels
			}
			has_completed_focus = RUS_fight_abreks_in_caucasus
		}

		remove_trigger = {
			has_country_flag = zelimhan_killed
		}

		days_remove = 30
		
		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 99 }
		}
		custom_cost_text = decision_cost_IE_100
		
		complete_effect = {
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -100
				}
				set_country_flag = ongoing_zelimhan
			}
		}

		remove_effect = {		
			random_list = {
				50 = {
					232 = {
						add_compliance = 5
						add_resistance = -5
					}	
				}
				25 = {
					232 = {
						add_compliance = 10
						add_resistance = -10
					}	
				}
				5 = {
					232 = {
						add_compliance = 15
						add_resistance = -15
					}	
				}
				20 = {
					232 = {
						add_resistance = 10
						add_compliance = -5
					}	
				}
			}
			add_days_mission_timeout = {
				mission = RUS_zelimhan_rebellion_timer
				days = 15
			}
			hidden_effect = {
				clr_country_flag = ongoing_zelimhan
			}
		}

		ai_will_do = {
			base = 10
		}
	}
	RUS_recruit_elders = {

		icon = GFX_filler

		available = {
			has_completed_focus = RUS_fight_abreks_in_caucasus
			divisions_in_state = {
    				size > 1
    				state = 232
			}
			NOT = {
				has_country_flag = ongoing_zelimhan
			}
		}

		visible = {
			NOT = {
				has_country_flag = zelimhan_rebels
			}
			has_completed_focus = RUS_fight_abreks_in_caucasus
		}

		remove_trigger = {
			has_country_flag = zelimhan_killed
		}

		days_remove = 30
		
		cost = 50
		
		complete_effect = {
			hidden_effect = {
				set_country_flag = ongoing_zelimhan
			}
		}
		
		remove_effect = {
			random_list = {
				50 = {
					232 = {
						add_compliance = 5
						add_resistance = -5
					}	
				}
				25 = {
					232 = {
						add_compliance = 10
						add_resistance = -10
					}	
				}
				5 = {
					232 = {
						add_compliance = 15
						add_resistance = -15
					}	
				}
				20 = {
					232 = {
						add_resistance = 10
						add_compliance = -5
					}	
				}
			}					
			add_days_mission_timeout = {
				mission = RUS_zelimhan_rebellion_timer
				days = 15
			}
			hidden_effect = {
				clr_country_flag = ongoing_zelimhan
			}
		}

		ai_will_do = {
			base = 10
		}
	}
	#gains intel event that he is hiding in cave
	RUS_surround_cave = {

		icon = GFX_filler

		available = {
			has_country_flag = zelimhan_raid
			divisions_in_state = {
    				size > 1
    				state = 232
			}
			NOT = {
				has_country_flag = ongoing_zelimhan
			}
		}

		visible = {
			NOT = {
				has_country_flag = zelimhan_rebels
			}
			has_country_flag = zelimhan_raid
		}

		remove_trigger = {
			has_country_flag = zelimhan_killed
		}
		
		fire_only_once = yes

		days_remove = 30
		
		cost = 35
		
		complete_effect = {
			hidden_effect = {
				set_country_flag = ongoing_zelimhan
			}
		}
		
		remove_effect = {
			country_event = {
				id = ww1_russia.37
			}
			hidden_effect = {
				clr_country_flag = ongoing_zelimhan
			}
		}

		ai_will_do = {
			base = 10
		}
	}
	#Finish off Zelimkhan
	RUS_kill_zelimkhan = {

		icon = GFX_filler

		available = {
			232 = {
				compliance > 79
				resistance < 0
			}
			divisions_in_state = {
    				size > 1
    				state = 232
			}
			has_equipment = { infantry_equipment > 99 }
			NOT = {
				has_country_flag = ongoing_zelimhan
			}
		}

		visible = {
			NOT = {
				has_country_flag = zelimhan_rebels
			}
			232 = {
				compliance > 79
				resistance < 1
			}
		}

		remove_trigger = {
			has_country_flag = zelimhan_killed
		}

		fire_only_once = yes

		days_remove = 30

		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 99 }
		}
		custom_cost_text = decision_cost_IE_100
		
		complete_effect = {
			hidden_effect = {
				set_country_flag = ongoing_zelimhan
			}
		}
		remove_effect = {
			country_event = {
				id = ww1_russia.38
			}
		}

		ai_will_do = {
			base = 10
		}
	}
}

#Army Reforms
RUS_army_reform = {
	RUS_new_mobilization_schedule = {
		icon = GFX_filler

		available = {
			NOT = {
				has_country_flag = ongoing_military_reform
			}
		}

		visible = {
			has_completed_focus = RUS_continue_military_reforms
		}

		fire_only_once = yes

		days_remove = 120

		cost = 50
		
		modifier = {
			training_time_factor = 0.15
		}
		
		complete_effect = {
			hidden_effect = {
				set_country_flag = ongoing_military_reform
			}
		}
		remove_effect = {
			if = {
				limit = {
					has_idea = RUS_outdated_army
				}
				swap_ideas = {
					remove_idea = RUS_outdated_army
					add_idea = RUS_outdated_army1
				}
			}
			else_if = {
				limit = {
					has_idea = RUS_outdated_army2
				}
				swap_ideas = {
					remove_idea = RUS_outdated_army2
					add_idea = RUS_outdated_army4
				}
			}
			else_if = {
				limit = {
					has_idea = RUS_outdated_army3
				}
				swap_ideas = {
					remove_idea = RUS_outdated_army3
					add_idea = RUS_outdated_army6
				}
			}
			else_if = {
				limit = {
					has_idea = RUS_outdated_army5
				}
				swap_ideas = {
					remove_idea = RUS_outdated_army5
					add_idea = RUS_outdated_army7
				}
			}
			hidden_effect = {
				clr_country_flag = ongoing_military_reform
			}
		}

		ai_will_do = {
			base = 10
		}
	}
	RUS_reorganize_military_academies = {
		icon = GFX_filler

		available = {
			NOT = {
				has_country_flag = ongoing_military_reform
			}
		}

		visible = {
			has_completed_focus = RUS_continue_military_reforms
		}

		fire_only_once = yes

		days_remove = 120

		custom_cost_trigger = {
			num_of_civilian_factories > 2
		}
		custom_cost_text = decision_cost_2_civ

		modifier = {
			civilian_factory_use = 2
		}
		
		complete_effect = {
			hidden_effect = {
				set_country_flag = ongoing_military_reform
			}
		}
		remove_effect = {
			if = {
				limit = {
					has_idea = RUS_outdated_army
				}
				swap_ideas = {
					remove_idea = RUS_outdated_army
					add_idea = RUS_outdated_army2
				}
			}
			else_if = {
				limit = {
					has_idea = RUS_outdated_army1
				}
				swap_ideas = {
					remove_idea = RUS_outdated_army1
					add_idea = RUS_outdated_army4
				}
			}
			else_if = {
				limit = {
					has_idea = RUS_outdated_army3
				}
				swap_ideas = {
					remove_idea = RUS_outdated_army3
					add_idea = RUS_outdated_army5
				}
			}
			else_if = {
				limit = {
					has_idea = RUS_outdated_army6
				}
				swap_ideas = {
					remove_idea = RUS_outdated_army6
					add_idea = RUS_outdated_army7
				}
			}
			hidden_effect = {
				clr_country_flag = ongoing_military_reform
			}
		}

		ai_will_do = {
			base = 10
		}
	}
	RUS_found_intendant_academy = {
		icon = GFX_filler

		available = {
			NOT = {
				has_country_flag = ongoing_military_reform
			}
		}

		visible = {
			has_completed_focus = RUS_continue_military_reforms
		}

		fire_only_once = yes

		days_remove = 120

		custom_cost_trigger = {
			num_of_civilian_factories > 2
		}
		custom_cost_text = decision_cost_2_civ

		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			hidden_effect = {
				set_country_flag = ongoing_military_reform
			}
		}
		remove_effect = {
			if = {
				limit = {
					has_idea = RUS_outdated_army
				}
				swap_ideas = {
					remove_idea = RUS_outdated_army
					add_idea = RUS_outdated_army3
				}
			}
			else_if = {
				limit = {
					has_idea = RUS_outdated_army1
				}
				swap_ideas = {
					remove_idea = RUS_outdated_army1
					add_idea = RUS_outdated_army6
				}
			}
			else_if = {
				limit = {
					has_idea = RUS_outdated_army2
				}
				swap_ideas = {
					remove_idea = RUS_outdated_army2
					add_idea = RUS_outdated_army5
				}
			}
			else_if = {
				limit = {
					has_idea = RUS_outdated_army4
				}
				swap_ideas = {
					remove_idea = RUS_outdated_army4
					add_idea = RUS_outdated_army7
				}
			}
			hidden_effect = {
				clr_country_flag = ongoing_military_reform
			}
		}

		ai_will_do = {
			base = 10
		}
	}
	RUS_improve_soldier_conditions = {
		icon = GFX_filler

		available = {
			NOT = {
				has_country_flag = ongoing_military_reform
			}
		}

		visible = {
			has_completed_focus = RUS_continue_military_reforms
			has_idea = RUS_outdated_army7
		}

		fire_only_once = yes

		days_remove = 120

		cost = 75
		
		modifier = {
			consumer_goods_factor = 0.05
		}
		
		complete_effect = {
			hidden_effect = {
				set_country_flag = ongoing_military_reform
			}
		}
		remove_effect = {
			if = {
				limit = {
					has_idea = RUS_outdated_army7
				}
				swap_ideas = {
					remove_idea = RUS_outdated_army7
					add_idea = RUS_outdated_army8
				}
			}
			else = {
				remove_ideas = RUS_outdated_army9
				hidden_effect = {
					clr_country_flag = ongoing_military_reform
					set_country_flag = complete_military_reform
				}
			}
			hidden_effect = {
				clr_country_flag = ongoing_military_reform
			}
		}

		ai_will_do = {
			base = 10
		}
	}
	RUS_new_conscription_law = {
		icon = GFX_filler

		available = {
			NOT = {
				has_country_flag = ongoing_military_reform
			}
		}

		visible = {
			has_completed_focus = RUS_continue_military_reforms
			has_idea = RUS_outdated_army7
		}

		fire_only_once = yes

		days_remove = 120

		cost = 75
		
		modifier = {
			training_time_factor = 0.2
		}
		
		complete_effect = {
			hidden_effect = {
				set_country_flag = ongoing_military_reform
			}
		}
		remove_effect = {
			if = {
				limit = {
					has_idea = RUS_outdated_army7
				}
				swap_ideas = {
					remove_idea = RUS_outdated_army7
					add_idea = RUS_outdated_army9
				}
			}
			else = {
				remove_ideas = RUS_outdated_army8
				hidden_effect = {
					clr_country_flag = ongoing_military_reform
					set_country_flag = complete_military_reform
				}
			}
			hidden_effect = {
				clr_country_flag = ongoing_military_reform
			}
		}

		ai_will_do = {
			base = 10
		}
	}
	RUS_lesser_rearmament_programme = {
		icon = GFX_filler

		available = {
			NOT = {
				has_country_flag = ongoing_military_reform
			}
			has_country_flag = complete_military_reform
		}

		visible = {
			has_completed_focus = RUS_continue_military_reforms
			has_idea = RUS_outdated_army7
		}

		fire_only_once = yes

		cost = 100
		
		complete_effect = {
			add_timed_idea = {
				idea = RUS_lesser_rearmament_programme
				days = 365
			}
		}

		ai_will_do = {
			base = 10
		}
	}
}
