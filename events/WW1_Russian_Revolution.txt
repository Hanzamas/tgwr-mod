add_namespace = ww1_russian_revolution

# Revolution in Petrograd
country_event = {
	id = ww1_russian_revolution.1
	title = ww1_russian_revolution.1.t
	desc = {
		text = ww1_russian_revolution.1.d.a
		trigger = {
			NOT = {
				has_completed_focus = RUS_cabinet_of_public_trust
			}
		}
	}
	desc = {
		text = ww1_russian_revolution.1.d.b
		trigger = { 
			has_completed_focus = RUS_cabinet_of_public_trust
		}
	}
	picture = GFX_filler
	fire_only_once = yes
	is_triggered_only = yes

	# Tsar needs to immediately get to Petrograd 
	option = {
		name = ww1_russia.1.a
		hidden_effect = {
			country_event = {
				id = ww1_russian_revolution.2
				days = 3
			}
		}
	}
}

# Tsar confronted by Duma members
country_event = {
	id = ww1_russian_revolution.2
	title = ww1_russian_revolution.2.t
	desc = ww1_russian_revolution.2.d
	picture = GFX_filler
	fire_only_once = yes
	is_triggered_only = yes
	
	# Form the Provisional Government and abdicate in favour of Mikhail 
	option = {
		name = ww1_russia.2.a
		trigger = {
			NOT = {
				has_completed_focus = RUS_cabinet_of_public_trust
			}
		}
		hidden_effect = {
			country_event = {
				id = ww1_russian_revolution.3
				days = 1
			}
		}
	}
	# Abdicate in favour of Alexei and grant full powers to the State Duma
	option = {
		name = ww1_russia.2.b
		trigger = {
			has_completed_focus = RUS_cabinet_of_public_trust
		}
		hidden_effect = {
			country_event = {
				id = ww1_russian_revolution.4
				days = 7
			}
		}
	}
}

# Mikhail refused to accept the throne
country_event = {
	id = ww1_russian_revolution.3
	title = ww1_russian_revolution.3.t
	desc = ww1_russian_revolution.3.d
	picture = GFX_filler
	fire_only_once = yes
	is_triggered_only = yes

	# What was he thinking?!
	option = {
		name = ww1_russia.3.a
		hidden_effect = {
			country_event = {
				id = ww1_russian_revolution.4
				days = 6
			}
		}
	}
}

# Last order of Nicholas
country_event = {
	id = ww1_russian_revolution.4
	title = ww1_russian_revolution.4.t
	desc = {
		text = ww1_russian_revolution.4.d.a
		trigger = {
			NOT = {
				has_completed_focus = RUS_cabinet_of_public_trust
			}
		}
	}
	desc = {
		text = ww1_russian_revolution.4.d.b
		trigger = { 
			has_completed_focus = RUS_cabinet_of_public_trust
		}
	}
	picture = GFX_filler
	fire_only_once = yes
	is_triggered_only = yes

	# Let's renounce the old world
	option = {
		name = ww1_russia.4.a
		trigger = {
			NOT = {
				has_completed_focus = RUS_cabinet_of_public_trust
			}
		}
		add_stability = 0.025
		add_war_support = 0.025
	}
	# War to the bitter end
	option = {
		name = ww1_russia.4.b
		trigger = { 
			has_completed_focus = RUS_cabinet_of_public_trust
		}
		add_stability = 0.025
		add_war_support = 0.025
	}
}

# Uprisings in Petrograd and Moscow
country_event = {
	id = ww1_russian_revolution.5
	title = ww1_russian_revolution.5.t
	desc = ww1_russian_revolution.5.d
	picture = GFX_filler
	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_country_flag = russian_revolution
			PET = {
				add_named_threat = {
					threat = 10
					name = rusrevolt.6.t
				}
				create_faction = red_movement
				set_political_power = 0
				set_stability = 0.65
				transfer_state = 195
				transfer_state = 219
				declare_war_on = {
					target = RUS
					type = civil_war
				}
				every_state = {
					limit = {
						is_core_of = RUS
					}
					add_core_of = PET
				}
				load_oob = "PET_1917"
				inherit_technology = RUS
			}
		}
	}

	# Launch a punitive expedition
	option = {
		name = ww1_russia.5.a
	}
	# Arise, awaken, working people!
	option = {
		name = ww1_russia.5.b
		PET = {
			change_tag_from = ROOT
		}
	}
}